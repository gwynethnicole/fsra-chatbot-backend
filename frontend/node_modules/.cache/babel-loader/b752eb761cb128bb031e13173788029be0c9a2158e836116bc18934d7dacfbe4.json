{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from \"firebase/auth\";\nimport { getFirestore, collection, addDoc } from \"firebase/firestore\";\n\n// Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"YOUR_FIREBASE_API_KEY\",\n  authDomain: \"your-project.firebaseapp.com\",\n  projectId: \"your-project-id\",\n  storageBucket: \"your-project.appspot.com\",\n  messagingSenderId: \"your-messaging-id\",\n  appId: \"your-app-id\"\n};\n\n// Initialize Firebase only **once**\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Google Sign-In with manual account selection\nexport const signInWithGoogle = async role => {\n  const provider = new GoogleAuthProvider();\n  provider.setCustomParameters({\n    prompt: \"select_account\" // Forces user to pick an account\n  });\n  try {\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    // Store user role in Firestore\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name: user.displayName,\n      email: user.email,\n      role: role // Assign role\n    });\n    console.log(\"User signed in:\", user);\n  } catch (error) {\n    console.error(\"Google Sign-In Error:\", error.message);\n  }\n};\n\n// Logout function\nexport const logout = () => {\n  signOut(auth);\n};\n\n// ✅ **Add this function to submit policy requests**\nexport const submitPolicyRequest = async (user, requestDetails) => {\n  if (!user) {\n    console.error(\"User not logged in\");\n    return;\n  }\n  try {\n    await addDoc(collection(db, \"policyRequests\"), {\n      uid: user.uid,\n      name: user.displayName,\n      email: user.email,\n      requestDetails,\n      status: \"pending\",\n      timestamp: new Date()\n    });\n    console.log(\"Policy request submitted\");\n  } catch (error) {\n    console.error(\"Error submitting policy request:\", error.message);\n  }\n};","map":{"version":3,"names":["initializeApp","getAuth","GoogleAuthProvider","signInWithPopup","signOut","getFirestore","collection","addDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","signInWithGoogle","role","provider","setCustomParameters","prompt","result","user","uid","name","displayName","email","console","log","error","message","logout","submitPolicyRequest","requestDetails","status","timestamp","Date"],"sources":["/Users/gwynethnicole/Desktop/frsa-web-app/src/firebaseConfig.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from \"firebase/auth\";\nimport { getFirestore, collection, addDoc } from \"firebase/firestore\";\n\n// Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"YOUR_FIREBASE_API_KEY\",\n    authDomain: \"your-project.firebaseapp.com\",\n    projectId: \"your-project-id\",\n    storageBucket: \"your-project.appspot.com\",\n    messagingSenderId: \"your-messaging-id\",\n    appId: \"your-app-id\",\n};\n\n// Initialize Firebase only **once**\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Google Sign-In with manual account selection\nexport const signInWithGoogle = async (role) => {\n    const provider = new GoogleAuthProvider();\n    provider.setCustomParameters({\n        prompt: \"select_account\", // Forces user to pick an account\n    });\n\n    try {\n        const result = await signInWithPopup(auth, provider);\n        const user = result.user;\n\n        // Store user role in Firestore\n        await addDoc(collection(db, \"users\"), {\n            uid: user.uid,\n            name: user.displayName,\n            email: user.email,\n            role: role, // Assign role\n        });\n\n        console.log(\"User signed in:\", user);\n    } catch (error) {\n        console.error(\"Google Sign-In Error:\", error.message);\n    }\n};\n\n// Logout function\nexport const logout = () => {\n    signOut(auth);\n};\n\n// ✅ **Add this function to submit policy requests**\nexport const submitPolicyRequest = async (user, requestDetails) => {\n    if (!user) {\n        console.error(\"User not logged in\");\n        return;\n    }\n\n    try {\n        await addDoc(collection(db, \"policyRequests\"), {\n            uid: user.uid,\n            name: user.displayName,\n            email: user.email,\n            requestDetails,\n            status: \"pending\",\n            timestamp: new Date(),\n        });\n        console.log(\"Policy request submitted\");\n    } catch (error) {\n        console.error(\"Error submitting policy request:\", error.message);\n    }\n};\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,OAAO,EAAEC,kBAAkB,EAAEC,eAAe,EAAEC,OAAO,QAAQ,eAAe;AACrF,SAASC,YAAY,EAAEC,UAAU,EAAEC,MAAM,QAAQ,oBAAoB;;AAErE;AACA,MAAMC,cAAc,GAAG;EACnBC,MAAM,EAAE,uBAAuB;EAC/BC,UAAU,EAAE,8BAA8B;EAC1CC,SAAS,EAAE,iBAAiB;EAC5BC,aAAa,EAAE,0BAA0B;EACzCC,iBAAiB,EAAE,mBAAmB;EACtCC,KAAK,EAAE;AACX,CAAC;;AAED;AACA,MAAMC,GAAG,GAAGf,aAAa,CAACQ,cAAc,CAAC;AACzC,OAAO,MAAMQ,IAAI,GAAGf,OAAO,CAACc,GAAG,CAAC;AAChC,OAAO,MAAME,EAAE,GAAGZ,YAAY,CAACU,GAAG,CAAC;;AAEnC;AACA,OAAO,MAAMG,gBAAgB,GAAG,MAAOC,IAAI,IAAK;EAC5C,MAAMC,QAAQ,GAAG,IAAIlB,kBAAkB,CAAC,CAAC;EACzCkB,QAAQ,CAACC,mBAAmB,CAAC;IACzBC,MAAM,EAAE,gBAAgB,CAAE;EAC9B,CAAC,CAAC;EAEF,IAAI;IACA,MAAMC,MAAM,GAAG,MAAMpB,eAAe,CAACa,IAAI,EAAEI,QAAQ,CAAC;IACpD,MAAMI,IAAI,GAAGD,MAAM,CAACC,IAAI;;IAExB;IACA,MAAMjB,MAAM,CAACD,UAAU,CAACW,EAAE,EAAE,OAAO,CAAC,EAAE;MAClCQ,GAAG,EAAED,IAAI,CAACC,GAAG;MACbC,IAAI,EAAEF,IAAI,CAACG,WAAW;MACtBC,KAAK,EAAEJ,IAAI,CAACI,KAAK;MACjBT,IAAI,EAAEA,IAAI,CAAE;IAChB,CAAC,CAAC;IAEFU,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEN,IAAI,CAAC;EACxC,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZF,OAAO,CAACE,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACC,OAAO,CAAC;EACzD;AACJ,CAAC;;AAED;AACA,OAAO,MAAMC,MAAM,GAAGA,CAAA,KAAM;EACxB7B,OAAO,CAACY,IAAI,CAAC;AACjB,CAAC;;AAED;AACA,OAAO,MAAMkB,mBAAmB,GAAG,MAAAA,CAAOV,IAAI,EAAEW,cAAc,KAAK;EAC/D,IAAI,CAACX,IAAI,EAAE;IACPK,OAAO,CAACE,KAAK,CAAC,oBAAoB,CAAC;IACnC;EACJ;EAEA,IAAI;IACA,MAAMxB,MAAM,CAACD,UAAU,CAACW,EAAE,EAAE,gBAAgB,CAAC,EAAE;MAC3CQ,GAAG,EAAED,IAAI,CAACC,GAAG;MACbC,IAAI,EAAEF,IAAI,CAACG,WAAW;MACtBC,KAAK,EAAEJ,IAAI,CAACI,KAAK;MACjBO,cAAc;MACdC,MAAM,EAAE,SAAS;MACjBC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACxB,CAAC,CAAC;IACFT,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;EAC3C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZF,OAAO,CAACE,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAACC,OAAO,CAAC;EACpE;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}